{% liquid
  if show_price and card_product.variants.size > 1
    assign gin_grid = false
  elsif simple_grid
    assign gin_grid = false
    else
    assign gin_grid = true
  endif
%}
<div class="custom__product-grid-wrap standard--grid {% if gin_grid %}reduced_padding{% endif %}">
  <a class="full-width-link" href="{{ card_product.url }}"></a>
        {% if card_product. metafields.custom.hover_image != blank %}
            <div class="product-grid-img">
              <img src="{{ card_product.metafields.custom.hover_image | image_url }}" width="533" height="676">
            </div>
          {% endif %}
    <div class="custom_card__media-wrap media media--transparent media--hover-effect">
        <img class="custom_card__media" src="{{ card_product.metafields.custom.product_cutout | image_url }}" width="auto" height="200">
    </div>
{% if gin_grid == true %}<div class="quickadd_title-wrap">{% endif %}
  {% if show_price %}<div class="title-price-wrap {% if gin_grid == false %}align-center{% endif %}">{% endif %}
    <h3>{{ card_product.title }}</h3>
    {% if show_price %}
      {% render 'price', product: card_product, price_class: '' %}
    {% endif %}
  {% if show_price %}</div>{% endif %}

  <div class="quick-add no-js-hidden">
    {%- assign product_form_id = 'quick-add-' | append: section_id | append: card_product.id -%}
    {%- if card_product.variants.size == 1 -%}
      <product-form>
        {%- form 'product', card_product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
          <input
            type="hidden"
            name="id"
            value="{{ card_product.selected_or_first_available_variant.id }}"
            disabled
          >
          <button
            id="{{ product_form_id }}-submit"
            type="submit"
            name="add"
            class="quick-add__submit button button--full-width button--secondary"
            aria-haspopup="dialog"
            aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ card_product.id }}"
            aria-live="polite"
            data-sold-out-message="true"
            {% if card_product.selected_or_first_available_variant.available == false %}
              disabled
            {% endif %}
          >
            <span>
              {%- if card_product.selected_or_first_available_variant.available -%}
                {% if simple_add-to-cart %} + {% else %}
                {{ 'products.product.add_to_cart' | t }}
                {% endif %}
              {%- else -%}
                {{ 'products.product.sold_out' | t }}
              {%- endif -%}
            </span>
            <span class="sold-out-message hidden">
              {{ 'products.product.sold_out' | t }}
            </span>
            <div class="loading-overlay__spinner hidden">
              <svg
                aria-hidden="true"
                focusable="false"
                role="presentation"
                class="spinner"
                viewBox="0 0 66 66"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
              </svg>
            </div>
          </button>
        {%- endform -%}
      </product-form>
    {%- else -%}
      <modal-opener data-modal="#QuickAdd-{{ card_product.id }}">
        <button
          id="{{ product_form_id }}-submit"
          type="submit"
          name="add"
          class="quick-add__submit button button--full-width button--secondary"
          aria-haspopup="dialog"
          aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ card_product.id }}"
          data-product-url="{{ card_product.url }}"
        >
          {{ 'products.product.choose_options' | t }}
          <div class="loading-overlay__spinner hidden">
            <svg
              aria-hidden="true"
              focusable="false"
              role="presentation"
              class="spinner"
              viewBox="0 0 66 66"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
            </svg>
          </div>
        </button>
      </modal-opener>
      <quick-add-modal id="QuickAdd-{{ card_product.id }}" class="quick-add-modal">
        <div
          role="dialog"
          aria-label="{{ 'products.product.choose_product_options' | t: product_name: card_product.title | escape }}"
          aria-modal="true"
          class="quick-add-modal__content global-settings-popup"
          tabindex="-1"
        >
          <button
            id="ModalClose-{{ card_product.id }}"
            type="button"
            class="quick-add-modal__toggle"
            aria-label="{{ 'accessibility.close' | t }}"
          >
            {% render 'icon-close' %}
          </button>
          <div id="QuickAddInfo-{{ card_product.id }}" class="quick-add-modal__content-info"></div>
        </div>
      </quick-add-modal>
    {% endif %}
  </div>
{% if gin_grid == true %}</div>{% endif %}